<head>
  <title>aes70explorer</title>
  <link rel=stylesheet href='css/index.css' />
  <script type=module src='js/global.js'></script>
  <script src='js/AES70.es5.js'></script>
  <script type=module src='js/index.js'></script>

  <meta
    name="viewport"
    content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, width=device-width"
  />
  <meta charset="UTF-8" />

  <meta name="apple-mobile-web-app-capable" content="yes" />

  <link
    rel="apple-touch-icon"
    sizes="57x57"
    href="images/favicons/apple-icon-57x57.png"
  />
  <link
    rel="apple-touch-icon"
    sizes="60x60"
    href="images/favicons/apple-icon-60x60.png"
  />
  <link
    rel="apple-touch-icon"
    sizes="72x72"
    href="images/favicons/apple-icon-72x72.png"
  />
  <link
    rel="apple-touch-icon"
    sizes="76x76"
    href="images/favicons/apple-icon-76x76.png"
  />
  <link
    rel="apple-touch-icon"
    sizes="114x114"
    href="images/favicons/apple-icon-114x114.png"
  />
  <link
    rel="apple-touch-icon"
    sizes="120x120"
    href="images/favicons/apple-icon-120x120.png"
  />
  <link
    rel="apple-touch-icon"
    sizes="144x144"
    href="images/favicons/apple-icon-144x144.png"
  />
  <link
    rel="apple-touch-icon"
    sizes="152x152"
    href="images/favicons/apple-icon-152x152.png"
  />
  <link
    rel="apple-touch-icon"
    sizes="180x180"
    href="images/favicons/apple-icon-180x180.png"
  />
  <link
    rel="icon"
    type="image/png"
    sizes="192x192"
    href="images/favicons/android-icon-192x192.png"
  />
  <link
    rel="icon"
    type="image/png"
    sizes="32x32"
    href="images/favicons/favicon-32x32.png"
  />
  <link
    rel="icon"
    type="image/png"
    sizes="96x96"
    href="images/favicons/favicon-96x96.png"
  />
  <link
    rel="icon"
    type="image/png"
    sizes="16x16"
    href="images/favicons/favicon-16x16.png"
  />
  <link rel="manifest" href="manifest.webmanifest" />
  <meta name="msapplication-TileColor" content="#232635" />
  <meta
    name="msapplication-TileImage"
    content="images/favicons/ms-icon-144x144.png"
  />
  <meta name="theme-color" content="#232635" />

  <awml-backend type=local name=local data="AES70.localDefaults"></awml-backend>
  <awml-backend type=localstorage name=storage data="AES70.storageDefaults"></awml-backend>
  <awml-backend type=local name=capabilities src='/_api/capabilities'></awml-backend>
</head>
<body>
  <div id=root>

<!--
    <div id=screensize>
      <aux-icon icon=screensize></aux-icon>
      <p>
        Your screen is too small<br>Minimum size is 1024x671
      </p>
    </div>
-->

    <div id=loading>
      <div id=loading1><div id=loading2></div></div>
    </div>

    <aux-expand id=tips class="aux-drawer-right" show_button=false>
      <awml-option type=bind name=expanded src="storage:tips/show"></awml-option>

      <img src="images/aes70explorer_4c_white.svg" width="240" height="41">

      <div>

      </div>

      <div class="copyright">
        <a href="https://deuso.de" target="_blank">
          Copyright 2020 - 2022 by DeusO GmbH
          <img src="images/DeusO Logo.svg">
        </a>
      </div>

      <div>
        <aux-icon icon="ocadeviceopen">
          <awml-option type=bind src='local:tips/icons/ocadevice' name=icon></awml-option>
        </aux-icon>
        <h2>OcaDevice</h2>
        Devices appear in the navigation to the left. Click the icon to
        inspect the sub-tree of the device. Click on the title to show the
        devices details in the Details pane at the bottom of the window.
      </div>

      <div>
        <aux-icon icon="ocablockopen">
          <awml-option type=bind src='local:tips/icons/ocablock' name=icon></awml-option>
        </aux-icon>
        <h2>OcaBlock</h2>
        Blocks appear in the subtree of devices. Click on the icon to inspect
        the children of the block. Click on the title to show the blocks
        details in the details pane at the bottom of the page.
      </div>

      <div>
        <aux-icon icon="ocaactuator">
          <awml-option type=bind src='local:tips/icons/ocaworker' name=icon></awml-option>
        </aux-icon>
        <h2>OcaWorker</h2>
        Actuators and sensors appear as child entries inside devices or blocks.
        Click on the title to see the details and a controllable
        widget in the details pane at the bottom of the page.
      </div>

      <div>
        <aux-icon icon="puzzle"></aux-icon>
        <h2>Add Control</h2>
        OcaWorkers can be added to the canvas in the center of the screen.
        To add a widget for this parameter click the puzzle icon in the
        navigation bar to the left.
      </div>

      <div>
        <aux-icon icon="trash"></aux-icon>
        <h2>Remove Control</h2>
        Controls on the canvas can be removed by clicking the trash icon in the
        navigation bar to the left. Wait a moment after the first click and
        click a second time to confirm the command.
      </div>

      <div>
        <aux-icon icon="edit"></aux-icon>
        <h2>Edit Control</h2>
        Some controls can be set by using the keyboard. To activate the
        input click on the edit icon. The current value will be selected,
        so you can start typing immediately to overwrite.
      </div>

      <div>
        <aux-icon icon="savecontrols">
          <awml-option type=bind src='local:tips/icons/interface' name=icon></awml-option>
        </aux-icon>
        <h2>Interfaces</h2>
        Store, restore and delete your control setups. The last interface will
        be restored when the application is re-opened.
      </div>

      <div>
        <aux-icon icon="wipecontrols"></aux-icon>
        <h2>Wipe Controls</h2>
        Pressing this button does two things: it removes all current elements
        (controls and line breaks) from the canvas and also resets the stored
        controls to none.
      </div>

      <div>
        <aux-icon icon="addlinebreak"></aux-icon>
        <h2>Add Line Break</h2>
        In the sidebar to the right you'll find a button for adding line breaks
        on the canvas. If a control is selected, the line break is added after
        thie control, otherwise it gets appended at the end.
      </div>

      <div>
        <aux-icon icon="deletelinebreak"></aux-icon>
        <h2>Remove Line Break</h2>
        This button becomes active once a control is selected, which is followed
        by a line break. Click the button in order to remove the line break
        after the active control.
      </div>

      <div>
        <aux-icon icon="cancel"></aux-icon>
        <h2>Remove Device</h2>
        If a device was added manually via the Add Device dialog, it can be
        removed from the list again by clicking this button.
      </div>

      <aux-button label="Close Help" icon="close">
        <awml-event type=click callback="AES70.closeHelp"></awml-event>
      </aux-button>

    </aux-expand>

    <div id="header">

      <aux-combobox id="interface">
        <awml-option type="bind" name="entries" src="storage:controls"
          transform-receive="v => Object.keys(v.list)"></awml-option>
        <awml-option type="bind" name="value" src="storage:interface"></awml-option>
      </aux-combobox>

      <aux-button icon="reload">
        <awml-option type="bind" name="disabled" src="storage:interface,storage:controls"
          transform-receive="a => !a[1].list[a[0]]"></awml-option>
        <awml-event type=click callback="AES70.loadInterface"></awml-event>
      </aux-button>

      <aux-confirmbutton icon=savecontrols icon_confirm="confirm">
        <awml-option type="bind" name="confirm" src="storage:interface,storage:controls"
          transform-receive="a => !!a[1].list[a[0]]"></awml-option>
        <awml-option type="bind" name="disabled" src="storage:interface"
          transform-receive="a => !a"></awml-option>
        <awml-event type=confirmed callback="AES70.saveInterface"></awml-event>
      </aux-confirmbutton>

      <aux-confirmbutton icon="trash" icon_confirm="confirm">
        <awml-option type="bind" name="disabled" src="storage:interface,storage:controls"
        transform-receive="a => !a[1].list[a[0]]"></awml-option>
        <awml-event type=confirmed callback="AES70.deleteInterface"></awml-event>
      </aux-confirmbutton>

      <div class="spacer"></div>

      <aux-confirmbutton
        icon=wipecontrols
        label="Wipe Controls"
        icon_confirm="confirm"
        >
        <awml-event type=confirmed callback="AES70.clearCanvas"></awml-event>
      </aux-confirmbutton>

      <aux-button icon=addlinebreak label="Add Line Break"
        >
        <awml-event type=click callback="AES70.addLineBreak"></awml-event>
        <awml-show src="local:canAddLineBreak"></awml-show>
      </aux-button>

      <aux-button icon=deletelinebreak label="Remove Line Break"
        >
        <awml-event type=click callback="AES70.removeLineBreak"></awml-event>
        <awml-show src="local:canRemoveLineBreak"></awml-show>
      </aux-button>

      <div class="spacer"></div>

      <aux-toggle icon=confirm id=showtips label="Help">
        <awml-option type=bind name=state src="storage:tips/show"></awml-option>
      </aux-toggle>

      <aux-toggle label="List" icon="list">
        <awml-option type=bind name="state" src="storage:list/show"></awml-option>
      </aux-toggle>

      <aux-toggle label="Details" icon="details">
        <awml-option type=bind name="state" src="storage:details/show"></awml-option>
      </aux-toggle>

      <!--aux-toggle label="Edit" icon="gear">
        <awml-option type=bind name="state" src="storage:edit/show"></awml-option>
      </aux-toggle-->

    </div>

    <aes70-navigation>

      <div id="logo"></div>

      <awml-class src="storage:list/show" transform-receive="v=>v?'show':'hide'"></awml-class>

    </aes70-navigation>
    <div id="canvas"></div>
    <aes70-details id=details>
      <awml-class src="storage:details/show" transform-receive="v=>v?'show':'hide'"></awml-class>
    </aes70-details>
    <aes70-edit id="sidebar">
      <awml-class src="storage:edit/show" transform-receive="v=>v?'show':'hide'"></awml-class>
    </aes70-edit>
  </div>
  <aux-notifications id="notifications"></aux-notifications>
</body>
